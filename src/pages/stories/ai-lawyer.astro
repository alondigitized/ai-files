---
import StoryLayout from '../../layouts/StoryLayout.astro';
import stories from '../../data/stories.json';

const story = stories.find(s => s.slug === 'ai-lawyer')!;
---

<style is:global>
  .legal-doc {
    background: var(--surface);
    border: 1px solid var(--border);
    border-top: 3px solid var(--story);
    border-radius: 0 0 1rem 1rem;
    padding: 2rem;
    margin-top: 2rem;
    font-family: 'Courier New', monospace;
    font-size: 0.85rem;
  }
  .legal-doc-header {
    text-align: center;
    margin-bottom: 2rem;
    padding-bottom: 1.5rem;
    border-bottom: 1px dashed var(--border);
  }
  .legal-doc-header .court-name { font-size: 0.78rem; letter-spacing: 0.1em; text-transform: uppercase; color: var(--story); margin-bottom: 0.5rem; }
  .legal-doc-header .doc-title { font-size: 1.1rem; font-weight: 700; color: var(--text); margin-bottom: 0.5rem; }
  .legal-doc-header .doc-sub { font-size: 0.8rem; color: var(--muted); }
  .legal-body { line-height: 1.9; color: #c0c0c0; }
  .legal-body .cite { color: var(--story); text-decoration: underline; cursor: default; }
  .legal-stamp {
    margin-top: 1.5rem;
    padding-top: 1.5rem;
    border-top: 1px dashed var(--border);
    font-size: 0.78rem;
    color: var(--muted);
  }

  .exhibit-grid { display: flex; flex-direction: column; gap: 1rem; margin-top: 2rem; }
  .exhibit-card {
    background: var(--surface);
    border: 1px solid var(--border);
    border-left: 4px solid var(--accent);
    border-radius: 0 0.75rem 0.75rem 0;
    padding: 1.25rem 1.5rem;
  }
  .exhibit-card.real { border-left-color: var(--green); }
  .exhibit-label { font-size: 0.65rem; letter-spacing: 0.15em; text-transform: uppercase; color: var(--accent); margin-bottom: 0.4rem; font-weight: 700; }
  .exhibit-card.real .exhibit-label { color: var(--green); }
  .exhibit-case { font-size: 1rem; font-weight: 700; color: var(--text); margin-bottom: 0.3rem; font-family: 'Courier New', monospace; }
  .exhibit-details { font-size: 0.82rem; color: var(--muted); }
  .exhibit-note { font-size: 0.78rem; color: var(--accent); margin-top: 0.4rem; font-style: italic; }
  .exhibit-note.ok { color: var(--green); }

  .steps { display: flex; flex-direction: column; gap: 1rem; margin-top: 1.5rem; }
  .step { display: flex; gap: 1.25rem; background: var(--surface); border: 1px solid var(--border); border-radius: 0.75rem; padding: 1.25rem 1.5rem; align-items: flex-start; }
  .step-num { font-size: 1.5rem; font-weight: 900; color: var(--story); opacity: 0.5; flex-shrink: 0; line-height: 1; padding-top: 3px; }
  .step h4 { font-size: 0.95rem; font-weight: 700; margin-bottom: 0.3rem; color: var(--text); }
  .step p { font-size: 0.88rem; margin: 0; color: var(--muted); }

  .warn { background: rgba(255,77,77,0.08); border: 1px solid rgba(255,77,77,0.3); border-radius: 0.75rem; padding: 1.25rem 1.5rem; display: flex; gap: 1rem; align-items: flex-start; margin: 2rem 0; }
  .warn-icon { font-size: 1.4rem; flex-shrink: 0; }
  .warn-text { font-size: 0.88rem; color: #ff9999; }
  .warn-text strong { display: block; margin-bottom: 0.25rem; color: var(--accent); }

  .phantom-wrap { width: 100%; margin: 0; line-height: 0; }
  .phantom-canvas { display: block; width: 100%; height: 380px; background: var(--bg); }
</style>

<StoryLayout story={story}>
  <div class="container">

<section class="section" id="intro">
  <h2><span class="num">01 ‚Äî The Case</span>Mata v. Avianca</h2>
  <p>Roberto Mata was suing Avianca airline after claiming he was injured by a metal serving cart during a flight. His attorney at the New York firm Levidow, Levidow &amp; Oberman, <strong>Steven Schwartz</strong>, had practiced law for three decades. He was not a tech skeptic ‚Äî but he was trying something new.</p>
  <p>To research the case, Schwartz turned to ChatGPT. He asked the AI to help him find prior court cases relevant to Mata's claims. ChatGPT obliged ‚Äî returning a list of precedents complete with case names, docket numbers, courts, dates, and summaries. They looked exactly like real court citations.</p>
  <p>They were not. All six cases were fabricated.</p>

  <div class="stat-cards">
    <div class="stat-card">
      <div class="stat-num">6</div>
      <div class="stat-label">completely fake court cases cited</div>
    </div>
    <div class="stat-card">
      <div class="stat-num">$5k</div>
      <div class="stat-label">sanctions imposed on attorneys</div>
    </div>
    <div class="stat-card">
      <div class="stat-num">30+</div>
      <div class="stat-label">years of Schwartz's legal career</div>
    </div>
  </div>
</section>

<div class="phantom-wrap">
  <canvas class="phantom-canvas" aria-hidden="true"></canvas>
</div>

<section class="section" id="document">
  <h2><span class="num">02 ‚Äî The Brief</span>Filed with the Court</h2>
  <p>In May 2023, Schwartz submitted his legal brief in the U.S. District Court for the Southern District of New York. Inside, he cited multiple cases to support his client's claims. Among them were entries like these:</p>

  <div class="legal-doc">
    <div class="legal-doc-header">
      <div class="court-name">U.S. District Court ¬∑ S.D.N.Y.</div>
      <div class="doc-title">Mata v. Avianca, Inc.</div>
      <div class="doc-sub">Plaintiff's Memorandum of Law ¬∑ May 2023 ¬∑ (Excerpt ‚Äî Illustrative)</div>
    </div>
    <div class="legal-body">
      <p style="margin-bottom:1rem;">In support of Plaintiff's position, we respectfully cite the following precedents establishing the applicable standard of care:</p>
      <p>See <span class="cite">Varghese v. China Southern Airlines Co. Ltd., 925 F.3d 1339</span> (11th Cir. 2019) (holding that airline liable for passenger injury under Montreal Convention where crew negligence was established‚Ä¶)</p>
      <p>See also <span class="cite">Shaboon v. EgyptAir</span>, No. 11 C 3944 (N.D. Ill. Sept. 28, 2012) (awarding damages where plaintiff demonstrated crew failed to follow established safety protocols‚Ä¶)</p>
      <p>See <span class="cite">Petersen v. Iran Air</span>, 905 F.Supp.2d 121 (D.D.C. 2012) (finding airline duty of care extended to‚Ä¶)</p>
    </div>
    <div class="legal-stamp">Filed: May 2023 ¬∑ Case No. 1:22-cv-01461 ¬∑ [Document later subject to sanctions proceeding]</div>
  </div>
</section>

<section class="section" id="exhibits">
  <h2><span class="num">03 ‚Äî Exhibit A</span>The Cases That Never Were</h2>
  <p>When Avianca's counsel tried to locate the cited precedents, they found nothing. No records. No docket entries. Nothing in any legal database. They notified the court. Judge P. Kevin Castel ordered Schwartz to produce the actual case decisions.</p>
  <p>Schwartz asked ChatGPT to provide them. ChatGPT generated what appeared to be full case decisions ‚Äî complete, detailed, and entirely invented.</p>

  <div class="exhibit-grid">
    <div class="exhibit-card">
      <div class="exhibit-label">Exhibit A ‚Äî Fabricated</div>
      <div class="exhibit-case">Varghese v. China Southern Airlines Co. Ltd.</div>
      <div class="exhibit-details">Cited as: 925 F.3d 1339 (11th Cir. 2019)</div>
      <div class="exhibit-note">Does not exist. No such case appears in 11th Circuit records or any legal database.</div>
    </div>
    <div class="exhibit-card">
      <div class="exhibit-label">Exhibit B ‚Äî Fabricated</div>
      <div class="exhibit-case">Martinez v. Delta Air Lines, Inc.</div>
      <div class="exhibit-details">Cited as: 2019 WL 4565137 (S.D.N.Y. 2019)</div>
      <div class="exhibit-note">Does not exist. The Westlaw citation corresponds to no case in the Southern District of New York.</div>
    </div>
    <div class="exhibit-card">
      <div class="exhibit-label">Exhibit C ‚Äî Fabricated</div>
      <div class="exhibit-case">Shaboon v. EgyptAir</div>
      <div class="exhibit-details">Cited as: No. 11 C 3944 (N.D. Ill. Sept. 28, 2012)</div>
      <div class="exhibit-note">Does not exist. No case with this docket number in the Northern District of Illinois.</div>
    </div>
    <div class="exhibit-card">
      <div class="exhibit-label">Exhibit D ‚Äî Fabricated</div>
      <div class="exhibit-case">Petersen v. Iran Air</div>
      <div class="exhibit-details">Cited as: 905 F.Supp.2d 121 (D.D.C. 2012)</div>
      <div class="exhibit-note">Does not exist. No such case in D.C. District Court records at this citation.</div>
    </div>
    <div class="exhibit-card">
      <div class="exhibit-label">Exhibit E ‚Äî Fabricated</div>
      <div class="exhibit-case">Miller v. United Airlines, Inc.</div>
      <div class="exhibit-details">Cited as: 2012 WL 5193 (N.D. Ill. Oct. 19, 2012)</div>
      <div class="exhibit-note">Does not exist. The citation resolves to no recoverable case.</div>
    </div>
    <div class="exhibit-card">
      <div class="exhibit-label">Exhibit F ‚Äî Fabricated</div>
      <div class="exhibit-case">Estate of Durden v. KLM Royal Dutch Airlines</div>
      <div class="exhibit-details">Cited as: 1996 WL 684209 (E.D. Pa. Nov. 22, 1996)</div>
      <div class="exhibit-note">Does not exist. No such case appears in the Eastern District of Pennsylvania.</div>
    </div>
    <div class="exhibit-card real">
      <div class="exhibit-label exhibit-note ok">For comparison ‚Äî Real Case</div>
      <div class="exhibit-case">Mata v. Avianca, Inc.</div>
      <div class="exhibit-details">Case No. 1:22-cv-01461 (S.D.N.Y.) ‚Äî The actual case that began this whole ordeal.</div>
      <div class="exhibit-note ok">Verifiable. Exists in court records. Used as exhibit in sanctions proceedings.</div>
    </div>
  </div>
</section>

<section class="section" id="sanctions">
  <h2><span class="num">04 ‚Äî The Reckoning</span>Judge Castel's Response</h2>
  <p>Judge P. Kevin Castel did not take the filing lightly. He held a hearing. He demanded explanations. Schwartz submitted an affidavit explaining that he had used ChatGPT without understanding that it could fabricate citations, and that he had verified the cases ‚Äî by asking ChatGPT to confirm they were real. ChatGPT had assured him they were.</p>

  <div class="warn">
    <span class="warn-icon">‚öñÔ∏è</span>
    <div class="warn-text">
      <strong>From Schwartz's Affidavit</strong>
      "I did not understand that ChatGPT could fabricate cases. I asked the program whether the cases were real. ChatGPT told me that the cases were real." When the judge asked Schwartz whether he had done any independent verification in a legal database, the answer was no.
    </div>
  </div>

  <div class="steps">
    <div class="step">
      <div class="step-num">01</div>
      <div>
        <h4>Sanctions: $5,000</h4>
        <p>Judge Castel sanctioned Schwartz and his firm Levidow, Levidow &amp; Oberman $5,000 ‚Äî noting that the conduct "reflects a failure to research the caselaw" and exhibited "bad faith" through the submission of fabricated citations.</p>
      </div>
    </div>
    <div class="step">
      <div class="step-num">02</div>
      <div>
        <h4>Mandatory Notices</h4>
        <p>The attorneys were ordered to serve copies of the court's sanctions opinion on each judge before whom they had cases pending in the district ‚Äî a public, professional humiliation.</p>
      </div>
    </div>
    <div class="step">
      <div class="step-num">03</div>
      <div>
        <h4>Legal Education</h4>
        <p>Schwartz was required to complete additional legal education on the ethics of AI-assisted legal research. The case became mandatory reading in bar association guidance documents across multiple jurisdictions.</p>
      </div>
    </div>
  </div>
</section>

<section class="section" id="fallout">
  <h2><span class="num">05 ‚Äî The Fallout</span>How Law Changed After Mata v. Avianca</h2>
  <p>The Schwartz case arrived at a pivotal moment ‚Äî when AI tools were first becoming easily accessible to legal professionals, but before any clear ethical guidance existed. It forced the profession to confront AI directly.</p>

  <div class="cards">
    <div class="card">
      <div class="card-icon">üìú</div>
      <h3>Court AI Disclosure Rules</h3>
      <p>Multiple federal courts issued new local rules requiring lawyers to certify that any AI-generated content has been independently verified, or to disclose AI's use in drafting filings.</p>
    </div>
    <div class="card">
      <div class="card-icon">üèõÔ∏è</div>
      <h3>Bar Association Guidance</h3>
      <p>State bar associations across the US issued ethics opinions warning that the duty of competence includes understanding the limitations of AI tools ‚Äî including their tendency to hallucinate.</p>
    </div>
    <div class="card">
      <div class="card-icon">üîç</div>
      <h3>Verification Obligation</h3>
      <p>The case established a clear professional standard: using AI for legal research is not inherently unethical, but failing to independently verify citations in a legal database is.</p>
    </div>
    <div class="card">
      <div class="card-icon">üéì</div>
      <h3>Law School Curriculum</h3>
      <p>Mata v. Avianca became case study material in law schools teaching AI literacy ‚Äî the canonical example of what happens when lawyers trust AI outputs without verification.</p>
    </div>
  </div>

  <p style="margin-top:2rem; font-style:italic; color:var(--muted);">ChatGPT didn't set out to deceive Schwartz. It was doing exactly what it was designed to do: generating fluent, plausible-sounding text. It just had no mechanism to distinguish a real case from a convincing invention. That distinction was supposed to be the lawyer's job.</p>
</section>

  </div>
</StoryLayout>

<script>
(function () {
  const canvas = document.querySelector('.phantom-canvas') as HTMLCanvasElement | null;
  if (!canvas) return;
  const ctx = canvas.getContext('2d')!;

  let W = 0, H = 0, animId = 0;

  const PHANTOM_NAMES = [
    'Varghese v. China Southern Airlines',
    'Shaboon v. EgyptAir',
    'Petersen v. Iran Air',
    'Martinez v. Delta Air Lines, Inc.',
    'Estate of Durden v. KLM Royal Dutch Airlines',
    'Zicherman v. Korean Air Lines',
  ];

  const GHOST_FRAGS = [
    '28 U.S.C. ¬ß 1332(a)', 'Fed. R. Civ. P. 12(b)(6)', 'Montreal Convention Art. 17',
    '49 U.S.C. ¬ß 40101', 'Warsaw Convention ¬ß 22', 'Fed. R. Evid. 702',
    '28 U.S.C. ¬ß 1291', 'F.R.C.P. 56(a)', 'Daubert v. Merrell Dow',
    'Twombly, 550 U.S. 544', 'Iqbal, 556 U.S. 662', '49 U.S.C. ¬ß 46301',
    'IATA Resolution 724', '2d Cir. 2018', 'S.D.N.Y. 2020',
    '(E.D. Pa. 1994)', 'WL 1234567', 'F.3d 221 (9th Cir.)',
    'F.Supp.2d 445', 'No. 19 Civ. 4421', "aff'd, 876 F.3d",
    'rev\'d on other grounds', 'cert. denied, 540 U.S.',
  ];

  function resize(): boolean {
    const rect = canvas!.getBoundingClientRect();
    const nW = Math.round(rect.width * devicePixelRatio);
    const nH = Math.round(rect.height * devicePixelRatio);
    if (nW === W && nH === H) return false;
    W = nW; H = nH;
    canvas!.width = W; canvas!.height = H;
    return true;
  }

  class Ghost {
    x = 0; y = 0; speed = 0; text = ''; fontSize = 0; alpha = 0;
    constructor() { this.reset(true); }
    reset(initial: boolean) {
      this.x = Math.random() * W;
      this.y = initial ? Math.random() * H : H + 20;
      this.speed = (0.15 + Math.random() * 0.25) * devicePixelRatio;
      this.text = GHOST_FRAGS[Math.floor(Math.random() * GHOST_FRAGS.length)];
      this.fontSize = (11 + Math.random() * 4) * devicePixelRatio;
      this.alpha = 0.04 + Math.random() * 0.04;
    }
    update() {
      this.y -= this.speed;
      if (this.y < -20) this.reset(false);
    }
    draw() {
      ctx.save();
      ctx.font = `${this.fontSize}px 'Courier New', monospace`;
      ctx.fillStyle = `rgba(232,232,232,${this.alpha})`;
      ctx.fillText(this.text, this.x, this.y);
      ctx.restore();
    }
  }

  type PState = 'waiting' | 'fadeIn' | 'hold' | 'strikethrough' | 'fadeOut';

  class Phantom {
    x = 0; y = 0; speed = 0; fontSize = 0; alpha = 0;
    state: PState = 'waiting';
    strikeProgress = 0; textWidth = 0;
    delay = 0; delayCount = 0;
    constructor(readonly name: string, readonly idx: number, readonly total: number) {
      this.reset(true);
    }
    reset(initial: boolean) {
      this.x = (0.1 + Math.random() * 0.6) * W;
      this.speed = 0.25 * devicePixelRatio;
      this.fontSize = 13 * devicePixelRatio;
      this.strikeProgress = 0; this.textWidth = 0;
      this.delayCount = 0;
      if (initial) {
        // Distribute from bottom (90%) to mid (32%) so none start above trigger
        this.y = H * (0.9 - (this.idx / this.total) * 0.58);
        this.alpha = 0.7 + Math.random() * 0.3;
        this.state = 'hold';
        this.delay = 0;
      } else {
        this.y = H + 30 * devicePixelRatio;
        this.alpha = 0;
        this.state = 'waiting';
        this.delay = this.idx * 55 + Math.random() * 90;
      }
    }
    update() {
      if (this.state === 'waiting') {
        this.delayCount++;
        if (this.delayCount >= this.delay) this.state = 'fadeIn';
        return;
      }
      this.y -= this.speed;
      const triggerY = H * 0.3;
      if (this.state === 'fadeIn') {
        this.alpha = Math.min(1, this.alpha + 0.02);
        if (this.alpha >= 1) this.state = 'hold';
      } else if (this.state === 'hold') {
        if (this.y <= triggerY) this.state = 'strikethrough';
      } else if (this.state === 'strikethrough') {
        this.strikeProgress = Math.min(1, this.strikeProgress + 1 / 60);
        if (this.strikeProgress >= 1) this.state = 'fadeOut';
      } else if (this.state === 'fadeOut') {
        this.alpha = Math.max(0, this.alpha - 0.015);
        if (this.alpha <= 0) this.reset(false);
      }
    }
    draw() {
      if (this.state === 'waiting') return;
      ctx.save();
      ctx.font = `${this.fontSize}px 'Courier New', monospace`;
      if (!this.textWidth) this.textWidth = ctx.measureText(this.name).width;
      ctx.globalAlpha = this.alpha;
      ctx.fillStyle = '#c8a84b';
      ctx.fillText(this.name, this.x, this.y);
      if (this.strikeProgress > 0) {
        const strikeY = this.y - this.fontSize * 0.35;
        ctx.strokeStyle = '#ff4d4d';
        ctx.lineWidth = 1.5 * devicePixelRatio;
        ctx.beginPath();
        ctx.moveTo(this.x, strikeY);
        ctx.lineTo(this.x + this.textWidth * this.strikeProgress, strikeY);
        ctx.stroke();
      }
      ctx.restore();
    }
  }

  let ghosts: Ghost[] = [];
  let phantoms: Phantom[] = [];

  function initParticles() {
    ghosts = Array.from({ length: 40 }, () => new Ghost());
    phantoms = PHANTOM_NAMES.map((n, i) => new Phantom(n, i, PHANTOM_NAMES.length));
  }

  function drawRuledLines() {
    const spacing = 24 * devicePixelRatio;
    ctx.strokeStyle = 'rgba(232,232,232,0.025)';
    ctx.lineWidth = 1;
    for (let y = spacing; y < H; y += spacing) {
      ctx.beginPath(); ctx.moveTo(0, y); ctx.lineTo(W, y); ctx.stroke();
    }
  }

  function drawStaticFrame() {
    ctx.clearRect(0, 0, W, H);
    drawRuledLines();
    const fs = 13 * devicePixelRatio;
    ctx.font = `${fs}px 'Courier New', monospace`;
    PHANTOM_NAMES.forEach((name, i) => {
      const x = W * 0.08;
      const y = H * (0.18 + i * (0.66 / (PHANTOM_NAMES.length - 1)));
      ctx.globalAlpha = 0.8;
      ctx.fillStyle = '#c8a84b';
      ctx.fillText(name, x, y);
      const tw = ctx.measureText(name).width;
      ctx.globalAlpha = 1;
      ctx.strokeStyle = '#ff4d4d';
      ctx.lineWidth = 1.5 * devicePixelRatio;
      ctx.beginPath();
      ctx.moveTo(x, y - fs * 0.35);
      ctx.lineTo(x + tw, y - fs * 0.35);
      ctx.stroke();
    });
    ctx.globalAlpha = 1;
  }

  function tick() {
    ctx.clearRect(0, 0, W, H);
    drawRuledLines();
    ghosts.forEach(g => { g.update(); g.draw(); });
    phantoms.forEach(p => { p.update(); p.draw(); });
    animId = requestAnimationFrame(tick);
  }

  const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;

  resize();
  const ro = new ResizeObserver(() => {
    if (resize()) initParticles();
  });
  ro.observe(canvas);
  initParticles();

  if (prefersReduced) {
    drawStaticFrame();
  } else {
    tick();
  }

  window.addEventListener('unload', () => {
    if (animId) cancelAnimationFrame(animId);
    ro.disconnect();
  });
})();
</script>
